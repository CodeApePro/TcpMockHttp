# TcpMockHttp
### 简介
一个简单的http并发请求类,原理是通过sockets扩展创建tcp连接,在tcp连接上传输符合http1.1协议的数据,从而将发送数据与读取结果分开来进行实现.

仅依赖sockets扩展,可在fpm环境使用.

适合php服务端需要大量多次获取不同其他http api时使用.

仅支持http1.1,不支持https,不支持http2.

curl扩展的curl_multi也可以支持并发发送请求,但是使用时觉得不是很适合我的场景,所以才使用了这样的方式.有需要的可以参考.

### 并发原理
通过将发送数据与读取结果分开,将传统的 发送1->读取1->发送2->读取2 这样的方式,调整为 发送1->发送2->其他代码->读取1->读取2,从而加快整体响应速度.

### 使用示例
详见demo.php

### 其他说明
1.重要:这不是一个规范的开源项目,也没有遵循psr4自动加载规范,只是公开一段自用的工具类代码,您可以以任意方式使用这段代码,同样的,我也不为代码产生的任何后果负责(笑)

2.由于未经过大量不同场景的测试,在使用本代码时请在测试环境做好测试.

3.由于解析响应的数据并不是特别快,尤其对于响应头部分基本上是逐个字节的匹配,所以只适合需要批量获取很多api数据的场景.才能加快整体速度.

4.这个思路也可以适合其他的本身没有很好的办法处理并发调用http api的语言.
